{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Cookie from 'js-cookie';\nexport default {\n  state: {\n    isCollapsed: false,\n    tabsList: [{\n      path: '/home',\n      name: 'home',\n      label: '首頁',\n      icon: 'HomeFilled'\n    }],\n    currentMenu: null,\n    menu: []\n  },\n  mutations: {\n    collapseMenu(state) {\n      state.isCollapsed = !state.isCollapsed;\n    },\n    selectMenu(state, val) {\n      state.currentMenu = val;\n      const result = state.tabsList.findIndex(item => item.name === val.name);\n      if (result === -1) {\n        state.tabsList.push(val);\n      } else {\n        state.currentMenu = null;\n      }\n    },\n    closeTag(state, val) {\n      const result = state.tabsList.findIndex(item => item.name === val.name);\n      state.tabsList.splice(result, 1);\n    },\n    setMenu(state, menu) {\n      state.menu = menu;\n      Cookie.set('menu', JSON.stringify(menu));\n    },\n    clearMenu(state) {\n      state.menu = [];\n      Cookie.remove('menu');\n    },\n    addMenu(state, router) {\n      if (!Cookie.get('menu')) {\n        return;\n      }\n      const menu = JSON.parse(Cookie.get('menu'));\n      state.menu = menu;\n      const menuArray = [];\n      menu.forEach(item => {\n        if (item.children) {\n          item.children = item.children.map(child => {\n            return {\n              ...child,\n              path: child.path.startsWith('/') ? child.path : `/${child.path}`,\n              component: () => import(`@/views/${child.url}`)\n            };\n          });\n          menuArray.push(...item.children);\n        } else {\n          menuArray.push({\n            ...item,\n            path: item.path.startsWith('/') ? item.path : `/${item.path}`,\n            component: () => import(`@/views/${item.url}`)\n          });\n        }\n      });\n      //路由的動態添加\n      menuArray.forEach(item => {\n        router.addRoute('Main', {\n          path: item.path,\n          name: item.name,\n          component: item.component\n        });\n      });\n    }\n  }\n};","map":{"version":3,"names":["Cookie","state","isCollapsed","tabsList","path","name","label","icon","currentMenu","menu","mutations","collapseMenu","selectMenu","val","result","findIndex","item","push","closeTag","splice","setMenu","set","JSON","stringify","clearMenu","remove","addMenu","router","get","parse","menuArray","forEach","children","map","child","startsWith","component","url","addRoute"],"sources":["/Users/serina/Desktop/vue-backstage/src/store/tab.js"],"sourcesContent":["import Cookie from 'js-cookie';\nexport default {\n    state: {\n        isCollapsed: false,\n        tabsList: [\n            {\n                path: '/home',\n                name: 'home',\n                label: '首頁',\n                icon: 'HomeFilled'\n            }\n        ],\n        currentMenu: null,\n        menu: []\n    },\n    mutations: {\n        collapseMenu(state) {\n            state.isCollapsed = !state.isCollapsed;\n        },\n        selectMenu(state, val) {\n            state.currentMenu = val;\n            const result = state.tabsList.findIndex(item => item.name === val.name);\n            if (result === -1) {\n                state.tabsList.push(val);\n            } else {\n                state.currentMenu = null\n            }\n        },\n        closeTag(state, val) {\n            const result = state.tabsList.findIndex(item => item.name === val.name );\n            state.tabsList.splice(result, 1);\n        },\n        setMenu(state, menu) {\n            state.menu = menu;\n            Cookie.set('menu', JSON.stringify(menu));\n        },\n        clearMenu(state) {\n            state.menu = [];\n            Cookie.remove('menu');\n        },\n        addMenu(state, router) {\n            if(!Cookie.get('menu')) {\n                return;\n            }\n            const menu = JSON.parse(Cookie.get('menu'));\n            state.menu = menu;\n            const menuArray = [];\n            menu.forEach(item => {\n                if(item.children) {\n                    item.children = item.children.map(child => {\n                        return {\n                            ...child,\n                            path: child.path.startsWith('/')?child.path : `/${child.path}`,\n                            component: () => import(`@/views/${child.url}`)\n                        };\n                    });\n                    menuArray.push(...item.children);\n                } else {\n                    menuArray.push({\n                        ...item,\n                        path: item.path.startsWith('/')?item.path : `/${item.path}`,\n                        component: () => import(`@/views/${item.url}`)\n                        \n                    });\n                }\n            });\n            //路由的動態添加\n            menuArray.forEach(item => {\n                router.addRoute('Main', {\n                    path: item.path,\n                    name: item.name,\n                    component: item.component\n                });\n            });\n        }\n    }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}