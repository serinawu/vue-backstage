{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Cookie from 'js-cookie';\nimport permission from \"../../api/mockServeData/permission\";\nexport default {\n  name: 'loginPage',\n  data() {\n    return {\n      form: {},\n      rules: {\n        username: [{\n          required: true,\n          message: '請輸入用戶名稱',\n          trigger: \"blur\"\n        }, {\n          min: 3,\n          message: '用戶名稱長度不得小於三位',\n          trigger: \"blur\"\n        }],\n        password: [{\n          required: true,\n          message: '請輸入密碼',\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  methods: {\n    login() {\n      this.$refs.form.validate(valid => {\n        if (valid) {\n          const formData = JSON.stringify(this.form);\n          permission.getMenu({\n            body: formData\n          }).then(({\n            data\n          }) => {\n            if (data.code === 20000) {\n              Cookie.set('token', data.data.token);\n              this.$store.commit('clearMenu');\n              this.$store.commit('setMenu', data.data.menu);\n              this.$store.commit('setToken', data.data.token);\n              this.$store.commit('getToken');\n              this.$store.commit('addMenu', this.$router);\n              this.$router.push({\n                name: 'home'\n              });\n            } else {\n              this.$message.error(data.data.message);\n            }\n          }).catch(error => {\n            let errorMessage = '發生未知錯誤'; // 預設錯誤消息\n            if (error.fields) {\n              errorMessage = error.fields.password[0].message;\n            } else if (error.response && error.response.data) {\n              errorMessage = error.response.data.message || errorMessage;\n            } else if (error.message) {\n              errorMessage = error.message;\n            }\n            this.$message.error(errorMessage);\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["Cookie","permission","name","data","form","rules","username","required","message","trigger","min","password","methods","login","$refs","validate","valid","formData","JSON","stringify","getMenu","body","then","code","set","token","$store","commit","menu","$router","push","$message","error","catch","errorMessage","fields","response"],"sources":["/Users/serina/Desktop/vue-backstage/src/views/login/loginPage.vue"],"sourcesContent":["<template>\n    <el-form\n    :model=\"form\"\n    status-icon\n    :rules=\"rules\"\n    ref=\"form\"\n    label-width=\"100px\"\n    class=\"login-container\"\n    >\n        <h3 class=\"login-title\">系統登入</h3>\n        <el-form-item\n        label=\"用戶名稱\"\n        label-width=\"80px\"\n        prop=\"userName\"\n        class=\"username\"\n        >\n            <el-input\n            type=\"input\"\n            v-model=\"form.username\"\n            autocomplete=\"off\"\n            placeholder=\"請輸入帳號\"\n            ></el-input>\n        </el-form-item>\n        <el-form-item\n        label=\"密碼\"\n        label-width=\"80px\"\n        prop=\"password\"\n        >\n        <el-input\n        type=\"password\"\n        v-model=\"form.password\"\n        autocomplete=\"off\"\n        placeholder=\"請輸入密碼\"\n        ></el-input>\n    </el-form-item>\n    <el-button type=\"primary\" @click=\"login\" class=\"login_submit\">登入</el-button>\n    </el-form>\n</template>\n<script>\nimport Cookie from 'js-cookie';\nimport permission from \"../../api/mockServeData/permission\";\nexport default {\n    name: 'loginPage',\n    data () {\n        return {\n            form: {\n\n            },\n            rules: {\n                username: [\n                    {\n                        required: true, \n                        message: '請輸入用戶名稱',\n                        trigger: \"blur\"\n                    },\n                    {\n                        min: 3,\n                        message: '用戶名稱長度不得小於三位',\n                        trigger: \"blur\"\n                    },\n                ],\n                password: [\n                    {\n                        required: true,\n                        message: '請輸入密碼',\n                        trigger: \"blur\"\n                    }\n                ]\n            }\n        }\n    },\n    methods: {\n        login() {\n            this.$refs.form.validate((valid)=> {\n                if (valid) {\n                    const formData = JSON.stringify(this.form);\n                    permission.getMenu({body: formData}).then(({data}) => {\n                    if(data.code === 20000) {\n                        Cookie.set('token', data.data.token)\n                        this.$store.commit('clearMenu')\n                        this.$store.commit('setMenu', data.data.menu)\n                        this.$store.commit('setToken', data.data.token)\n                        this.$store.commit('getToken')\n                        this.$store.commit('addMenu', this.$router)\n                        this.$router.push({ name: 'home' });\n                    } else {\n                        this.$message.error(data.data.message)\n                    }\n                    }).catch(error => {\n                        let errorMessage = '發生未知錯誤';  // 預設錯誤消息\n                        if (error.fields) {\n                            errorMessage = error.fields.password[0].message;\n                        } else if (error.response && error.response.data) {\n                            errorMessage = error.response.data.message || errorMessage;\n                        } else if (error.message) {\n                            errorMessage = error.message;\n                        }\n                        this.$message.error(errorMessage);\n                    });\n                }\n            });\n        }\n    }\n}\n</script>\n<style lang=\"less\" scoped>\n.login-container {\n    width: 350px;\n    border-radius: 15px;\n    background-clip: padding-box;\n    margin: 180px auto;\n    padding: 35px 35px 15px;\n    background: #ffffff;\n    border: 1px solid #eaeaea;\n    box-shadow: 0 0 25px #cacaca;\n}\n.login-title {\n    margin: 0 auto 20px;\n    text-align: center;\n    color: #505458;\n}\n.el-form-item {\n\n    div {\n        margin-left: 0 !important;\n\n            button {\n            margin: 0 auto;\n        }\n    }\n}\n</style>"],"mappings":";AAuCA,OAAOA,MAAK,MAAO,WAAW;AAC9B,OAAOC,UAAS,MAAO,oCAAoC;AAC3D,eAAe;EACXC,IAAI,EAAE,WAAW;EACjBC,IAAGA,CAAA,EAAK;IACJ,OAAO;MACHC,IAAI,EAAE,CAEN,CAAC;MACDC,KAAK,EAAE;QACHC,QAAQ,EAAE,CACN;UACIC,QAAQ,EAAE,IAAI;UACdC,OAAO,EAAE,SAAS;UAClBC,OAAO,EAAE;QACb,CAAC,EACD;UACIC,GAAG,EAAE,CAAC;UACNF,OAAO,EAAE,cAAc;UACvBC,OAAO,EAAE;QACb,CAAC,CACJ;QACDE,QAAQ,EAAE,CACN;UACIJ,QAAQ,EAAE,IAAI;UACdC,OAAO,EAAE,OAAO;UAChBC,OAAO,EAAE;QACb;MAER;IACJ;EACJ,CAAC;EACDG,OAAO,EAAE;IACLC,KAAKA,CAAA,EAAG;MACJ,IAAI,CAACC,KAAK,CAACV,IAAI,CAACW,QAAQ,CAAEC,KAAK,IAAI;QAC/B,IAAIA,KAAK,EAAE;UACP,MAAMC,QAAO,GAAIC,IAAI,CAACC,SAAS,CAAC,IAAI,CAACf,IAAI,CAAC;UAC1CH,UAAU,CAACmB,OAAO,CAAC;YAACC,IAAI,EAAEJ;UAAQ,CAAC,CAAC,CAACK,IAAI,CAAC,CAAC;YAACnB;UAAI,CAAC,KAAK;YACtD,IAAGA,IAAI,CAACoB,IAAG,KAAM,KAAK,EAAE;cACpBvB,MAAM,CAACwB,GAAG,CAAC,OAAO,EAAErB,IAAI,CAACA,IAAI,CAACsB,KAAK;cACnC,IAAI,CAACC,MAAM,CAACC,MAAM,CAAC,WAAW;cAC9B,IAAI,CAACD,MAAM,CAACC,MAAM,CAAC,SAAS,EAAExB,IAAI,CAACA,IAAI,CAACyB,IAAI;cAC5C,IAAI,CAACF,MAAM,CAACC,MAAM,CAAC,UAAU,EAAExB,IAAI,CAACA,IAAI,CAACsB,KAAK;cAC9C,IAAI,CAACC,MAAM,CAACC,MAAM,CAAC,UAAU;cAC7B,IAAI,CAACD,MAAM,CAACC,MAAM,CAAC,SAAS,EAAE,IAAI,CAACE,OAAO;cAC1C,IAAI,CAACA,OAAO,CAACC,IAAI,CAAC;gBAAE5B,IAAI,EAAE;cAAO,CAAC,CAAC;YACvC,OAAO;cACH,IAAI,CAAC6B,QAAQ,CAACC,KAAK,CAAC7B,IAAI,CAACA,IAAI,CAACK,OAAO;YACzC;UACA,CAAC,CAAC,CAACyB,KAAK,CAACD,KAAI,IAAK;YACd,IAAIE,YAAW,GAAI,QAAQ,EAAG;YAC9B,IAAIF,KAAK,CAACG,MAAM,EAAE;cACdD,YAAW,GAAIF,KAAK,CAACG,MAAM,CAACxB,QAAQ,CAAC,CAAC,CAAC,CAACH,OAAO;YACnD,OAAO,IAAIwB,KAAK,CAACI,QAAO,IAAKJ,KAAK,CAACI,QAAQ,CAACjC,IAAI,EAAE;cAC9C+B,YAAW,GAAIF,KAAK,CAACI,QAAQ,CAACjC,IAAI,CAACK,OAAM,IAAK0B,YAAY;YAC9D,OAAO,IAAIF,KAAK,CAACxB,OAAO,EAAE;cACtB0B,YAAW,GAAIF,KAAK,CAACxB,OAAO;YAChC;YACA,IAAI,CAACuB,QAAQ,CAACC,KAAK,CAACE,YAAY,CAAC;UACrC,CAAC,CAAC;QACN;MACJ,CAAC,CAAC;IACN;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}